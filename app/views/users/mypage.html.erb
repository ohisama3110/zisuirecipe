<!DOCTYPE html>
<html>

<style>
  .recipe-item {
    display: flex;
    align-items: center;
  }

  .recipe-image, .recipe-info {
    width: 200px;
    height: auto;
    padding-bottom: 10px;
  }

  .recipe-info {
    flex: 1;
    padding-left: 10px;
  }
</style>

<main>
<h1>マイページ</h1>

<div style="text-align: center;">
  <% if @user.image_url.present? %>
    <%= image_tag @user.image_url %>
  <% else %>
    <%= image_tag '25480379.jpg', size: "100x100" %>
  <% end %>


  <div>
    <%= @user.name %>
  </div>
  <div>
    <%= @user.introduction %>
  </div>

  <%= link_to '編集する', edit_user_path(@user) %>
</div>

<h2>レシピ一覧</h2>
<% if @user_recipes.any? %>
  <div class="recipes">
    <% @user_recipes.each do |recipe| %>
      <div class="recipe-item">
        <div class="recipe-image">
          <% if recipe.image.attached? %>
            <%= image_tag recipe.image, size: "200x200" %>
          <% else %>
            <img src="/assets/25480379.jpg" alt="画像の説明", size: "200x200" >
          <% end %>
        </div>
        <div class="recipe-info">
          <p><%= link_to recipe.dish_name, "/recipes/#{recipe.id}" %></p>
          <p><%= recipe.ingredient %></p>
          <p><%= recipe.servings %></p>
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <p>まだ投稿したレシピはありません。</p>
  <%= link_to "レシピを書く", new_recipe_path %>
<% end %>

<div style="margin-top: 20px;">
  <%= button_to "退会する", user_path(current_user), method: :delete, data: { confirm: "本当に退会しますか？" } %>
</div>
</main>